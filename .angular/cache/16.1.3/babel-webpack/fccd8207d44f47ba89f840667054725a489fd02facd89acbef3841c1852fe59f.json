{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../service/form.service\";\nimport * as i2 from \"../../service/topic.service\";\nimport * as i3 from \"../../service/field.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"../../service/session.service\";\nimport * as i6 from \"../../service/modal-create-window.service\";\nimport * as i7 from \"../../service/modal-edit-window.service\";\nimport * as i8 from \"../../service/modal-delete-window.service\";\nimport * as i9 from \"@angular/common\";\nimport * as i10 from \"@angular/forms\";\nimport * as i11 from \"../../components/header/header.component\";\nimport * as i12 from \"../../components/error/error.component\";\nimport * as i13 from \"../../components/modal-create-window/modal-create-window.component\";\nimport * as i14 from \"../../components/form-item-in-list/form-item-in-list.component\";\nimport * as i15 from \"../../components/create-form/create-form.component\";\nimport * as i16 from \"../../components/modal-edit-window/modal-edit-window.component\";\nimport * as i17 from \"../../components/modal-delete-window/modal-delete-window.component\";\nimport * as i18 from \"../../components/large-area-with-action-buttons/large-area-with-action-buttons.component\";\nimport * as i19 from \"../../components/edit-topic/edit-topic.component\";\nimport * as i20 from \"../../components/delete-topic/delete-topic.component\";\nimport * as i21 from \"../../pipes/filter-forms.pipe\";\nfunction FormsPageComponent_app_large_area_with_action_buttons_3_p_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 10);\n    i0.ɵɵtext(1, \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction FormsPageComponent_app_large_area_with_action_buttons_3_div_3_div_1_app_form_item_in_list_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-form-item-in-list\", 14);\n  }\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext();\n    const item_r7 = ctx_r10.$implicit;\n    const i_r8 = ctx_r10.index;\n    const ctx_r9 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"form\", item_r7)(\"fieldCount\", ctx_r9.fieldCounts[i_r8]);\n  }\n}\nfunction FormsPageComponent_app_large_area_with_action_buttons_3_div_3_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtemplate(1, FormsPageComponent_app_large_area_with_action_buttons_3_div_3_div_1_app_form_item_in_list_1_Template, 1, 2, \"app-form-item-in-list\", 13);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r7 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r7.shown);\n  }\n}\nfunction FormsPageComponent_app_large_area_with_action_buttons_3_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, FormsPageComponent_app_large_area_with_action_buttons_3_div_3_div_1_Template, 2, 1, \"div\", 11);\n    i0.ɵɵpipe(2, \"filterForms\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind2(2, 1, ctx_r5.forms, ctx_r5.term));\n  }\n}\nconst _c0 = function () {\n  return [\"/topics\"];\n};\nfunction FormsPageComponent_app_large_area_with_action_buttons_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-large-area-with-action-buttons\", 5)(1, \"input\", 6);\n    i0.ɵɵlistener(\"ngModelChange\", function FormsPageComponent_app_large_area_with_action_buttons_3_Template_input_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.term = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(2, FormsPageComponent_app_large_area_with_action_buttons_3_p_2_Template, 2, 0, \"p\", 7);\n    i0.ɵɵtemplate(3, FormsPageComponent_app_large_area_with_action_buttons_3_div_3_Template, 3, 4, \"div\", 8);\n    i0.ɵɵelementStart(4, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function FormsPageComponent_app_large_area_with_action_buttons_3_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.modalCreateService.open());\n    });\n    i0.ɵɵtext(5, \"+\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵpropertyInterpolate1(\"title\", \"\\u0424\\u043E\\u0440\\u043C\\u044B \\u0438\\u0437 \\u0442\\u0435\\u043C\\u044B \", ctx_r0.getTopicName(), \"\");\n    i0.ɵɵproperty(\"itemToPerformActionsWith\", ctx_r0.topic)(\"buttonBackRoute\", i0.ɵɵpureFunction0(7, _c0))(\"buttonsAvailable\", ctx_r0.sessionService.isCurrentUserAdmin());\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.term);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.loading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.forms && ctx_r0.fieldCounts);\n  }\n}\nfunction FormsPageComponent_app_modal_create_window_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"app-modal-create-window\", 15);\n    i0.ɵɵelement(1, \"app-create-form\", 16);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"topic\", ctx_r1.topic);\n  }\n}\nfunction FormsPageComponent_app_modal_edit_window_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"app-modal-edit-window\", 17);\n    i0.ɵɵelement(1, \"app-edit-topic\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction FormsPageComponent_app_modal_delete_window_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"app-modal-delete-window\", 18);\n    i0.ɵɵelement(1, \"app-delete-topic\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let FormsPageComponent = /*#__PURE__*/(() => {\n  class FormsPageComponent {\n    constructor(formService, topicService, fieldService, activatedRoute, sessionService, modalCreateService, modalEditService, modalDeleteService) {\n      this.loading = false;\n      this.formsLoaded = false;\n      this.topicLoaded = false;\n      this.fieldCountsLoaded = false;\n      this.term = '';\n      this.formService = formService;\n      this.topicService = topicService;\n      this.fieldService = fieldService;\n      this.activatedRoute = activatedRoute;\n      this.sessionService = sessionService;\n      this.modalCreateService = modalCreateService;\n      this.modalEditService = modalEditService;\n      this.modalDeleteService = modalDeleteService;\n    }\n    ngOnInit() {\n      this.subscription1 = this.activatedRoute.params.subscribe(params => {\n        let topicId = params['topic_id'];\n        this.loading = true;\n        this.subscription2 = this.topicService.getTopicById(topicId).subscribe(result => {\n          this.topicLoaded = true;\n          this.topic = result;\n          this.checkLoading();\n        });\n        this.subscription3 = this.formService.getFormsByTopicId(topicId).subscribe(result => {\n          this.forms = result;\n          this.formsLoaded = true;\n          this.checkLoading();\n        });\n        this.subscription4 = this.fieldService.getFieldCountsOfTopicForms(topicId).subscribe(result => {\n          this.fieldCounts = result;\n          this.fieldCountsLoaded = true;\n          this.checkLoading();\n        });\n      });\n    }\n    getTopicName() {\n      if (this.topic) {\n        return '\"' + this.topic.name + '\"';\n      }\n      return '';\n    }\n    ngOnDestroy() {\n      if (this.subscription1) this.subscription1.unsubscribe();\n      if (this.subscription2) this.subscription2.unsubscribe();\n      if (this.subscription3) this.subscription3.unsubscribe();\n      if (this.subscription4) this.subscription4.unsubscribe();\n    }\n    checkLoading() {\n      if (this.formsLoaded && this.topicLoaded && this.fieldCountsLoaded) this.loading = false;\n    }\n  }\n  FormsPageComponent.ɵfac = function FormsPageComponent_Factory(t) {\n    return new (t || FormsPageComponent)(i0.ɵɵdirectiveInject(i1.FormService), i0.ɵɵdirectiveInject(i2.TopicService), i0.ɵɵdirectiveInject(i3.FieldService), i0.ɵɵdirectiveInject(i4.ActivatedRoute), i0.ɵɵdirectiveInject(i5.SessionService), i0.ɵɵdirectiveInject(i6.ModalCreateWindowService), i0.ɵɵdirectiveInject(i7.ModalEditWindowService), i0.ɵɵdirectiveInject(i8.ModalDeleteWindowService));\n  };\n  FormsPageComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: FormsPageComponent,\n    selectors: [[\"app-forms-page\"]],\n    decls: 7,\n    vars: 4,\n    consts: [[1, \"main-body\"], [3, \"itemToPerformActionsWith\", \"title\", \"buttonBackRoute\", \"buttonsAvailable\", 4, \"ngIf\"], [\"title\", \"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u043D\\u043E\\u0432\\u0443\\u044E \\u0444\\u043E\\u0440\\u043C\\u0443\", 4, \"ngIf\"], [\"title\", \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u0442\\u0435\\u043C\\u0443\", 4, \"ngIf\"], [\"title\", \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0442\\u0435\\u043C\\u0443\", 4, \"ngIf\"], [3, \"itemToPerformActionsWith\", \"title\", \"buttonBackRoute\", \"buttonsAvailable\"], [\"type\", \"text\", \"placeholder\", \"\\u041F\\u043E\\u0438\\u0441\\u043A \\u043F\\u043E \\u0444\\u043E\\u0440\\u043C\\u0430\\u043C...\", 1, \"m-2\", \"border\", \"rounded-1\", \"py-2\", \"px-4\", \"w-11/12\", 3, \"ngModel\", \"ngModelChange\"], [\"class\", \"text-center text-lg p-2\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"rounded-pill\", \"bg-red-700\", \"text-white\", \"fixed\", \"right-5\", \"bottom-8\", \"py-2\", \"px-3\", 3, \"click\"], [1, \"text-center\", \"text-lg\", \"p-2\"], [\"class\", \"inline-block\", 4, \"ngFor\", \"ngForOf\"], [1, \"inline-block\"], [3, \"form\", \"fieldCount\", 4, \"ngIf\"], [3, \"form\", \"fieldCount\"], [\"title\", \"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u043D\\u043E\\u0432\\u0443\\u044E \\u0444\\u043E\\u0440\\u043C\\u0443\"], [3, \"topic\"], [\"title\", \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u0442\\u0435\\u043C\\u0443\"], [\"title\", \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0442\\u0435\\u043C\\u0443\"]],\n    template: function FormsPageComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelement(1, \"app-header\")(2, \"app-error\");\n        i0.ɵɵtemplate(3, FormsPageComponent_app_large_area_with_action_buttons_3_Template, 6, 8, \"app-large-area-with-action-buttons\", 1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(4, FormsPageComponent_app_modal_create_window_4_Template, 2, 1, \"app-modal-create-window\", 2);\n        i0.ɵɵtemplate(5, FormsPageComponent_app_modal_edit_window_5_Template, 2, 0, \"app-modal-edit-window\", 3);\n        i0.ɵɵtemplate(6, FormsPageComponent_app_modal_delete_window_6_Template, 2, 0, \"app-modal-delete-window\", 4);\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.topic);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.modalCreateService.isVisible());\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.modalEditService.isVisible());\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.modalDeleteService.isVisible());\n      }\n    },\n    dependencies: [i9.NgForOf, i9.NgIf, i10.DefaultValueAccessor, i10.NgControlStatus, i10.NgModel, i11.HeaderComponent, i12.ErrorComponent, i13.ModalCreateWindow, i14.FormItemInListComponent, i15.CreateFormComponent, i16.ModalEditWindowComponent, i17.ModalDeleteWindowComponent, i18.LargeAreaWithActionButtonsComponent, i19.EditTopicComponent, i20.DeleteTopicComponent, i21.FilterFormsPipe]\n  });\n  return FormsPageComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}