{"ast":null,"code":"import { NavigationEnd } from \"@angular/router\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nexport class UrlService {\n  constructor(router) {\n    this.router = router;\n    this.subscribeToNavigationEvents();\n  }\n  subscribeToNavigationEvents() {\n    this.router.events.subscribe(event => {\n      if (event instanceof NavigationEnd) {\n        this.saveCurrentPage();\n      }\n    });\n  }\n  saveCurrentPage() {\n    let currentPage = this.getCurrentRouterLink();\n    let prevPage = this.getCurrentPage();\n    if (prevPage != currentPage) {\n      this.lastPage = prevPage;\n      this.currentPage = currentPage;\n    }\n    console.log('prev page: ' + prevPage);\n    console.log('current page: ' + currentPage);\n    console.log('last page: ' + this.getLastPage());\n  }\n  getCurrentPage() {\n    return this.currentPage;\n  }\n  getLastPage() {\n    return this.lastPage;\n  }\n  getCurrentRouterLink() {\n    const urlTree = this.router.createUrlTree([], {\n      queryParamsHandling: 'merge',\n      preserveFragment: true\n    });\n    return this.router.serializeUrl(urlTree);\n  }\n}\nUrlService.ɵfac = function UrlService_Factory(t) {\n  return new (t || UrlService)(i0.ɵɵinject(i1.Router));\n};\nUrlService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: UrlService,\n  factory: UrlService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"names":["NavigationEnd","UrlService","constructor","router","subscribeToNavigationEvents","events","subscribe","event","saveCurrentPage","currentPage","getCurrentRouterLink","prevPage","getCurrentPage","lastPage","console","log","getLastPage","urlTree","createUrlTree","queryParamsHandling","preserveFragment","serializeUrl","i0","ɵɵinject","i1","Router","factory","ɵfac","providedIn"],"sources":["C:\\Важное\\6 семестр =)\\Практыка\\Проект\\questionnaire\\angular-questionnaire\\src\\app\\service\\url.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport {NavigationEnd, Router} from \"@angular/router\";\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UrlService {\n  private router: Router;\n\n  private lastPage: string;\n  private currentPage: string;\n\n  constructor(router: Router) {\n    this.router = router;\n\n    this.subscribeToNavigationEvents();\n  }\n\n  private subscribeToNavigationEvents(): void {\n    this.router.events.subscribe(event => {\n      if (event instanceof NavigationEnd) {\n        this.saveCurrentPage();\n      }\n    });\n  }\n\n  saveCurrentPage() {\n    let currentPage = this.getCurrentRouterLink();\n\n    let prevPage = this.getCurrentPage();\n    if (prevPage != currentPage) {\n      this.lastPage = prevPage;\n      this.currentPage = currentPage;\n    }\n\n    console.log('prev page: ' + prevPage);\n    console.log('current page: ' + currentPage);\n    console.log('last page: ' + this.getLastPage());\n  }\n\n  getCurrentPage() {\n    return this.currentPage;\n  }\n\n  getLastPage() {\n    return this.lastPage;\n  }\n\n  private getCurrentRouterLink(): string {\n    const urlTree = this.router.createUrlTree([], {\n      queryParamsHandling: 'merge',\n      preserveFragment: true\n    });\n\n    return this.router.serializeUrl(urlTree);\n  }\n}\n"],"mappings":"AACA,SAAQA,aAAa,QAAe,iBAAiB;;;AAKrD,OAAM,MAAOC,UAAU;EAMrBC,YAAYC,MAAc;IACxB,IAAI,CAACA,MAAM,GAAGA,MAAM;IAEpB,IAAI,CAACC,2BAA2B,EAAE;EACpC;EAEQA,2BAA2BA,CAAA;IACjC,IAAI,CAACD,MAAM,CAACE,MAAM,CAACC,SAAS,CAACC,KAAK,IAAG;MACnC,IAAIA,KAAK,YAAYP,aAAa,EAAE;QAClC,IAAI,CAACQ,eAAe,EAAE;;IAE1B,CAAC,CAAC;EACJ;EAEAA,eAAeA,CAAA;IACb,IAAIC,WAAW,GAAG,IAAI,CAACC,oBAAoB,EAAE;IAE7C,IAAIC,QAAQ,GAAG,IAAI,CAACC,cAAc,EAAE;IACpC,IAAID,QAAQ,IAAIF,WAAW,EAAE;MAC3B,IAAI,CAACI,QAAQ,GAAGF,QAAQ;MACxB,IAAI,CAACF,WAAW,GAAGA,WAAW;;IAGhCK,OAAO,CAACC,GAAG,CAAC,aAAa,GAAGJ,QAAQ,CAAC;IACrCG,OAAO,CAACC,GAAG,CAAC,gBAAgB,GAAGN,WAAW,CAAC;IAC3CK,OAAO,CAACC,GAAG,CAAC,aAAa,GAAG,IAAI,CAACC,WAAW,EAAE,CAAC;EACjD;EAEAJ,cAAcA,CAAA;IACZ,OAAO,IAAI,CAACH,WAAW;EACzB;EAEAO,WAAWA,CAAA;IACT,OAAO,IAAI,CAACH,QAAQ;EACtB;EAEQH,oBAAoBA,CAAA;IAC1B,MAAMO,OAAO,GAAG,IAAI,CAACd,MAAM,CAACe,aAAa,CAAC,EAAE,EAAE;MAC5CC,mBAAmB,EAAE,OAAO;MAC5BC,gBAAgB,EAAE;KACnB,CAAC;IAEF,OAAO,IAAI,CAACjB,MAAM,CAACkB,YAAY,CAACJ,OAAO,CAAC;EAC1C;;AAjDWhB,UAAU,C;mBAAVA,UAAU,EAAAqB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,MAAA;AAAA;AAAVxB,UAAU,C;SAAVA,UAAU;EAAAyB,OAAA,EAAVzB,UAAU,CAAA0B,IAAA;EAAAC,UAAA,EAFT;AAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}