{"ast":null,"code":"import { StompService } from \"@stomp/ng2-stompjs\";\nexport class MessagingService {\n  constructor(socketUrl, streamUrl) {\n    let stompConfig = {\n      url: socketUrl,\n      headers: {},\n      heartbeat_in: 0,\n      heartbeat_out: 20000,\n      reconnect_delay: 5000,\n      debug: true\n    };\n    this.stompService = new StompService(stompConfig);\n    this.messages = this.stompService.subscribe(streamUrl);\n  }\n  stream() {\n    return this.messages;\n  }\n  send(url, message) {\n    return this.stompService.publish(url, JSON.stringify(message));\n  }\n  state() {\n    return this.stompService.state;\n  }\n}","map":{"version":3,"names":["StompService","MessagingService","constructor","socketUrl","streamUrl","stompConfig","url","headers","heartbeat_in","heartbeat_out","reconnect_delay","debug","stompService","messages","subscribe","stream","send","message","publish","JSON","stringify","state"],"sources":["C:\\Важное\\6 семестр =)\\Практыка\\Проект\\questionnaire\\angular-questionnaire\\src\\app\\service\\messaging-service.service.ts"],"sourcesContent":["import { StompService, StompConfig, StompState } from \"@stomp/ng2-stompjs\";\nimport { Message } from \"@stomp/stompjs\";\nimport { Observable, BehaviorSubject } from \"rxjs\";\nimport {Injectable} from \"@angular/core\";\n\nexport class MessagingService {\n  private messages: Observable<Message>;\n  private stompService: StompService;\n\n  constructor(socketUrl: string, streamUrl: string) {\n    let stompConfig: StompConfig = {\n      url: socketUrl,\n      headers: {\n      },\n      heartbeat_in: 0,\n      heartbeat_out: 20000,\n      reconnect_delay: 5000,\n      debug: true\n    };\n\n    this.stompService = new StompService(stompConfig);\n\n    this.messages = this.stompService.subscribe(streamUrl);\n  }\n\n  public stream(): Observable<Message> {\n    return this.messages;\n  }\n\n  public send(url: string, message: any) {\n    return this.stompService.publish(url, JSON.stringify(message));\n  }\n\n  public state(): BehaviorSubject<StompState> {\n    return this.stompService.state;\n  }\n}\n"],"mappings":"AAAA,SAASA,YAAY,QAAiC,oBAAoB;AAK1E,OAAM,MAAOC,gBAAgB;EAI3BC,YAAYC,SAAiB,EAAEC,SAAiB;IAC9C,IAAIC,WAAW,GAAgB;MAC7BC,GAAG,EAAEH,SAAS;MACdI,OAAO,EAAE,EACR;MACDC,YAAY,EAAE,CAAC;MACfC,aAAa,EAAE,KAAK;MACpBC,eAAe,EAAE,IAAI;MACrBC,KAAK,EAAE;KACR;IAED,IAAI,CAACC,YAAY,GAAG,IAAIZ,YAAY,CAACK,WAAW,CAAC;IAEjD,IAAI,CAACQ,QAAQ,GAAG,IAAI,CAACD,YAAY,CAACE,SAAS,CAACV,SAAS,CAAC;EACxD;EAEOW,MAAMA,CAAA;IACX,OAAO,IAAI,CAACF,QAAQ;EACtB;EAEOG,IAAIA,CAACV,GAAW,EAAEW,OAAY;IACnC,OAAO,IAAI,CAACL,YAAY,CAACM,OAAO,CAACZ,GAAG,EAAEa,IAAI,CAACC,SAAS,CAACH,OAAO,CAAC,CAAC;EAChE;EAEOI,KAAKA,CAAA;IACV,OAAO,IAAI,CAACT,YAAY,CAACS,KAAK;EAChC"},"metadata":{},"sourceType":"module","externalDependencies":[]}