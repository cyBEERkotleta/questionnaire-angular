{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../service/form.service\";\nimport * as i2 from \"../../service/user.service\";\nimport * as i3 from \"../../service/topic.service\";\nimport * as i4 from \"../../service/field.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"../../little-components/button-edit/button-edit.component\";\nimport * as i7 from \"../../little-components/button-delete/button-delete.component\";\nconst _c0 = function (a0) {\n  return {\n    \"bg-gray-100\": a0\n  };\n};\nfunction ManageQuestionnairesComponent_tr_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 6)(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵelement(8, \"app-button-edit\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵelement(10, \"app-button-delete\", 8);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const form_r1 = ctx.$implicit;\n    const even_r2 = ctx.even;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(7, _c0, even_r2));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(form_r1.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(form_r1.topic.shownName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", ctx_r0.getActiveFieldCountOfForm(form_r1), \"/\", form_r1.fields.length, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"editable\", form_r1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"deletable\", form_r1);\n  }\n}\nexport class ManageQuestionnairesComponent {\n  constructor(formService, userService, topicService, fieldService) {\n    this.formService = formService;\n    this.userService = userService;\n    this.topicService = topicService;\n    this.fieldService = fieldService;\n  }\n  ngOnInit() {\n    this.subscriptionUser = this.userService.updateCurrentUser().subscribe(result => {\n      this.user = result;\n      this.subscriptionForms = this.formService.getFormsByUserId(this.user.id).subscribe(forms => {\n        this.forms = forms;\n      });\n      this.subscriptionFieldCounts = this.fieldService.getFieldCountsOfUserForms(this.user.id).subscribe(fieldCounts => {\n        this.fieldCounts = fieldCounts;\n      });\n    });\n  }\n  ngOnDestroy() {\n    if (this.subscriptionUser) this.subscriptionUser.unsubscribe();\n    if (this.subscriptionForms) this.subscriptionForms.unsubscribe();\n    if (this.subscriptionFieldCounts) this.subscriptionFieldCounts.unsubscribe();\n  }\n}\nManageQuestionnairesComponent.ɵfac = function ManageQuestionnairesComponent_Factory(t) {\n  return new (t || ManageQuestionnairesComponent)(i0.ɵɵdirectiveInject(i1.FormService), i0.ɵɵdirectiveInject(i2.UserService), i0.ɵɵdirectiveInject(i3.TopicService), i0.ɵɵdirectiveInject(i4.FieldService));\n};\nManageQuestionnairesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ManageQuestionnairesComponent,\n  selectors: [[\"app-manage-questionnaires\"]],\n  decls: 13,\n  vars: 1,\n  consts: [[1, \"table-white-gray\"], [1, \"w-5/12\", \"px-3\"], [1, \"w-3/12\", \"px-3\"], [1, \"w-2/12\", \"px-3\"], [1, \"w-1/12\", \"px-3\"], [3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [3, \"ngClass\"], [3, \"editable\"], [3, \"deletable\"]],\n  template: function ManageQuestionnairesComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"table\", 0)(1, \"thead\")(2, \"tr\")(3, \"th\", 1);\n      i0.ɵɵtext(4, \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"th\", 2);\n      i0.ɵɵtext(6, \"\\u0422\\u0435\\u043C\\u0430\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"th\", 3);\n      i0.ɵɵtext(8, \"\\u0412\\u043E\\u043F\\u0440\\u043E\\u0441\\u044B (\\u0430\\u043A\\u0442\\u0438\\u0432\\u043D\\u044B\\u0445/\\u043D\\u0435\\u0430\\u043A\\u0442\\u0438\\u0432\\u043D\\u044B\\u0445)\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(9, \"th\", 4)(10, \"th\", 4);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(11, \"tbody\");\n      i0.ɵɵtemplate(12, ManageQuestionnairesComponent_tr_12_Template, 11, 9, \"tr\", 5);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(12);\n      i0.ɵɵproperty(\"ngForOf\", ctx.forms);\n    }\n  },\n  dependencies: [i5.NgClass, i5.NgForOf, i6.ButtonEditComponent, i7.ButtonDeleteComponent],\n  styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵproperty","ɵɵpureFunction1","_c0","even_r2","ɵɵadvance","ɵɵtextInterpolate","form_r1","name","topic","shownName","ɵɵtextInterpolate2","ctx_r0","getActiveFieldCountOfForm","fields","length","ManageQuestionnairesComponent","constructor","formService","userService","topicService","fieldService","ngOnInit","subscriptionUser","updateCurrentUser","subscribe","result","user","subscriptionForms","getFormsByUserId","id","forms","subscriptionFieldCounts","getFieldCountsOfUserForms","fieldCounts","ngOnDestroy","unsubscribe","ɵɵdirectiveInject","i1","FormService","i2","UserService","i3","TopicService","i4","FieldService","selectors","decls","vars","consts","template","ManageQuestionnairesComponent_Template","rf","ctx","ɵɵtemplate","ManageQuestionnairesComponent_tr_12_Template"],"sources":["C:\\Важное\\6 семестр =)\\Практыка\\Проект\\questionnaire\\angular-questionnaire\\src\\app\\components\\manage-questionnaires\\manage-questionnaires.component.ts","C:\\Важное\\6 семестр =)\\Практыка\\Проект\\questionnaire\\angular-questionnaire\\src\\app\\components\\manage-questionnaires\\manage-questionnaires.component.html"],"sourcesContent":["import {Component, OnDestroy, OnInit} from '@angular/core';\nimport {FormService} from \"../../service/form.service\";\nimport {UserService} from \"../../service/user.service\";\nimport {Subscription} from \"rxjs\";\nimport {Form} from \"../../entity/Form\";\nimport {User} from \"../../entity/User\";\nimport {Topic} from \"../../entity/Topic\";\nimport {TopicService} from \"../../service/topic.service\";\nimport {Field} from \"../../entity/Field\";\nimport {FieldService} from \"../../service/field.service\";\n\n@Component({\n  selector: 'app-manage-questionnaires',\n  templateUrl: './manage-questionnaires.component.html',\n  styleUrls: ['./manage-questionnaires.component.css']\n})\nexport class ManageQuestionnairesComponent implements OnInit, OnDestroy {\n  private formService: FormService;\n  private userService: UserService;\n  private topicService: TopicService;\n  private fieldService: FieldService;\n\n  user: User;\n  forms: Form[];\n  fieldCounts: number[];\n\n  private subscriptionUser: Subscription;\n  private subscriptionForms: Subscription;\n  private subscriptionFieldCounts: Subscription;\n\n  constructor(formService: FormService,\n              userService: UserService,\n              topicService: TopicService,\n              fieldService: FieldService) {\n    this.formService = formService;\n    this.userService = userService;\n    this.topicService = topicService;\n    this.fieldService = fieldService;\n  }\n\n  ngOnInit() {\n    this.subscriptionUser = this.userService.updateCurrentUser()\n      .subscribe(result => {\n        this.user = result;\n\n        this.subscriptionForms = this.formService.getFormsByUserId(this.user.id)\n          .subscribe(forms => {\n            this.forms = forms;\n          });\n\n        this.subscriptionFieldCounts = this.fieldService.getFieldCountsOfUserForms(this.user.id)\n          .subscribe(fieldCounts => {\n            this.fieldCounts = fieldCounts;\n          });\n      });\n  }\n\n  ngOnDestroy() {\n    if (this.subscriptionUser)\n      this.subscriptionUser.unsubscribe();\n    if (this.subscriptionForms)\n      this.subscriptionForms.unsubscribe();\n    if (this.subscriptionFieldCounts)\n      this.subscriptionFieldCounts.unsubscribe();\n  }\n}\n","<table class=\"table-white-gray\"\n>\n  <thead>\n  <tr>\n    <th class=\"w-5/12 px-3\">Название</th>\n    <th class=\"w-3/12 px-3\">Тема</th>\n    <th class=\"w-2/12 px-3\">Вопросы (активных/неактивных)</th>\n    <th class=\"w-1/12 px-3\"></th>\n    <th class=\"w-1/12 px-3\"></th>\n  </tr>\n  </thead>\n  <tbody>\n  <tr *ngFor=\"let form of forms; let even = even\" [ngClass]=\"{'bg-gray-100': even}\">\n    <td>{{form.name}}</td>\n    <td>{{form.topic.shownName}}</td>\n    <td>{{getActiveFieldCountOfForm(form)}}/{{form.fields.length}}</td>\n    <td>\n      <app-button-edit\n        [editable]=\"form\"\n      ></app-button-edit>\n    </td>\n    <td>\n      <app-button-delete\n        [deletable]=\"form\"\n      ></app-button-delete>\n    </td>\n  </tr>\n  </tbody>\n</table>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}