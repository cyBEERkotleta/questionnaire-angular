{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/common\";\nfunction OptionListComponent_div_0_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵelement(1, \"input\", 6);\n    i0.ɵɵelementStart(2, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function OptionListComponent_div_0_div_3_Template_button_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const i_r3 = restoredCtx.index;\n      const ctx_r4 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r4.removeFieldOption(i_r3));\n    });\n    i0.ɵɵtext(3, \"Remove\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const i_r3 = ctx.index;\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"placeholder\", \"\\u0412\\u0430\\u0440\\u0438\\u0430\\u043D\\u0442 \", i_r3 + 1, \"\");\n    i0.ɵɵproperty(\"formControlName\", ctx_r1.fieldOptions[i_r3].text);\n  }\n}\nfunction OptionListComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 1)(2, \"form\", 2);\n    i0.ɵɵtemplate(3, OptionListComponent_div_0_div_3_Template, 4, 2, \"div\", 3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"button\", 4);\n    i0.ɵɵlistener(\"click\", function OptionListComponent_div_0_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.addFieldOption());\n    });\n    i0.ɵɵtext(5, \"Add Option\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.fieldOptionsForm);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.getFormArray().controls);\n  }\n}\nexport class OptionListComponent {\n  constructor(formBuilder) {\n    this.fieldOptions = [];\n    this.visible = false;\n    this.fieldOptionsChange = new EventEmitter();\n    /*this.fieldOptionsForm = new FormGroup({\n      options: new FormArray([])\n    });*/\n    this.formBuilder = formBuilder;\n    this.fieldOptionsForm = this.formBuilder.group({\n      options: this.formBuilder.array([])\n    });\n  }\n  ngOnInit() {\n    this.populateFieldOptionsForm();\n  }\n  getFormArray() {\n    return this.fieldOptionsForm.get('options');\n  }\n  populateFieldOptionsForm() {\n    const optionsArray = this.getFormArray();\n    optionsArray.clear();\n    if (!this.fieldOptions) return;\n    /*this.fieldOptions.forEach(option => {\n      optionsArray.push(new FormControl(option.text));\n    });*/\n    this.fieldOptions.forEach(option => {\n      optionsArray.push(this.formBuilder.group({\n        text: option.text\n      }));\n    });\n  }\n  addFieldOption() {\n    const optionsArray = this.getFormArray();\n    /*optionsArray.push(new FormControl(''));*/\n    optionsArray.push(this.formBuilder.group({\n      text: ''\n    }));\n    this.updateFieldOptions();\n  }\n  removeFieldOption(index) {\n    const optionsArray = this.getFormArray();\n    optionsArray.removeAt(index);\n    this.updateFieldOptions();\n  }\n  updateFieldOptions() {\n    const optionsArray = this.getFormArray();\n    /*this.fieldOptions = optionsArray.value.map((text: string, index: number) => {\n      return {\n        id: (!this.fieldOptions || this.fieldOptions.length <= index) ? null : this.fieldOptions[index].id,\n        text,\n        shownName: text\n      };\n    });*/\n    this.fieldOptions = optionsArray.value.map(option => {\n      return {\n        id: option.id,\n        text: option.text,\n        shownName: option.text\n      };\n    });\n    this.fieldOptionsChange.emit(this.fieldOptions);\n    console.log('fieldOptions:');\n    this.fieldOptions.forEach(option => console.log(option.text + ', ' + option.id));\n  }\n}\nOptionListComponent.ɵfac = function OptionListComponent_Factory(t) {\n  return new (t || OptionListComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder));\n};\nOptionListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: OptionListComponent,\n  selectors: [[\"app-option-list\"]],\n  inputs: {\n    fieldOptions: \"fieldOptions\",\n    visible: \"visible\"\n  },\n  outputs: {\n    fieldOptionsChange: \"fieldOptionsChange\"\n  },\n  decls: 1,\n  vars: 1,\n  consts: [[4, \"ngIf\"], [1, \"options-container\"], [3, \"formGroup\"], [\"class\", \"option-row\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"option-row\"], [\"type\", \"text\", 1, \"form-control\", 3, \"formControlName\", \"placeholder\"], [\"type\", \"button\", 1, \"btn\", \"btn-danger\", 3, \"click\"]],\n  template: function OptionListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, OptionListComponent_div_0_Template, 6, 2, \"div\", 0);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.visible);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n  styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["EventEmitter","i0","ɵɵelementStart","ɵɵelement","ɵɵlistener","OptionListComponent_div_0_div_3_Template_button_click_2_listener","restoredCtx","ɵɵrestoreView","_r5","i_r3","index","ctx_r4","ɵɵnextContext","ɵɵresetView","removeFieldOption","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵpropertyInterpolate1","ɵɵproperty","ctx_r1","fieldOptions","text","ɵɵtemplate","OptionListComponent_div_0_div_3_Template","OptionListComponent_div_0_Template_button_click_4_listener","_r7","ctx_r6","addFieldOption","ctx_r0","fieldOptionsForm","getFormArray","controls","OptionListComponent","constructor","formBuilder","visible","fieldOptionsChange","group","options","array","ngOnInit","populateFieldOptionsForm","get","optionsArray","clear","forEach","option","push","updateFieldOptions","removeAt","value","map","id","shownName","emit","console","log","ɵɵdirectiveInject","i1","FormBuilder","selectors","inputs","outputs","decls","vars","consts","template","OptionListComponent_Template","rf","ctx","OptionListComponent_div_0_Template"],"sources":["C:\\Важное\\6 семестр =)\\Практыка\\Проект\\questionnaire\\angular-questionnaire\\src\\app\\components\\option-list\\option-list.component.ts","C:\\Важное\\6 семестр =)\\Практыка\\Проект\\questionnaire\\angular-questionnaire\\src\\app\\components\\option-list\\option-list.component.html"],"sourcesContent":["import {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\nimport {FieldOption} from \"../../entity/FieldOption\";\nimport {FormArray, FormBuilder, FormControl, FormGroup} from \"@angular/forms\";\n\n@Component({\n  selector: 'app-option-list',\n  templateUrl: './option-list.component.html',\n  styleUrls: ['./option-list.component.css']\n})\nexport class OptionListComponent implements OnInit {\n  @Input() fieldOptions: FieldOption[] = [];\n  @Input() visible: boolean = false;\n\n  @Output() fieldOptionsChange = new EventEmitter<FieldOption[]>();\n\n  fieldOptionsForm: FormGroup;\n\n  private formBuilder: FormBuilder;\n\n  constructor(formBuilder: FormBuilder) {\n    /*this.fieldOptionsForm = new FormGroup({\n      options: new FormArray([])\n    });*/\n    this.formBuilder = formBuilder;\n\n    this.fieldOptionsForm = this.formBuilder.group({\n      options: this.formBuilder.array([])\n    });\n  }\n\n  ngOnInit() {\n    this.populateFieldOptionsForm();\n  }\n\n  getFormArray(): FormArray {\n    return this.fieldOptionsForm.get('options') as FormArray;\n  }\n\n  private populateFieldOptionsForm() {\n    const optionsArray = this.getFormArray();\n    optionsArray.clear();\n\n    if (!this.fieldOptions)\n      return;\n\n    /*this.fieldOptions.forEach(option => {\n      optionsArray.push(new FormControl(option.text));\n    });*/\n    this.fieldOptions.forEach(option => {\n      optionsArray.push(\n        this.formBuilder.group({\n          text: option.text\n        })\n      );\n    });\n  }\n\n  addFieldOption() {\n    const optionsArray = this.getFormArray();\n    /*optionsArray.push(new FormControl(''));*/\n    optionsArray.push(\n      this.formBuilder.group({\n        text: ''\n      })\n    );\n\n    this.updateFieldOptions();\n  }\n\n  removeFieldOption(index: number) {\n    const optionsArray = this.getFormArray();\n    optionsArray.removeAt(index);\n    this.updateFieldOptions();\n  }\n\n  updateFieldOptions() {\n    const optionsArray = this.getFormArray();\n    /*this.fieldOptions = optionsArray.value.map((text: string, index: number) => {\n      return {\n        id: (!this.fieldOptions || this.fieldOptions.length <= index) ? null : this.fieldOptions[index].id,\n        text,\n        shownName: text\n      };\n    });*/\n\n    this.fieldOptions = optionsArray.value.map((option: FieldOption) => {\n      return {\n        id: option.id,\n        text: option.text,\n        shownName: option.text\n      };\n    });\n\n    this.fieldOptionsChange.emit(this.fieldOptions);\n\n    console.log('fieldOptions:');\n    this.fieldOptions.forEach(option => console.log(option.text + ', ' + option.id));\n  }\n}\n","<div *ngIf=\"visible\">\n  <div class=\"options-container\">\n    <form [formGroup]=\"fieldOptionsForm\">\n      <div *ngFor=\"let optionCtrl of getFormArray().controls; let i = index\" class=\"option-row\">\n        <input type=\"text\" [formControlName]=\"fieldOptions[i].text\" class=\"form-control\" placeholder=\"Вариант {{i + 1}}\">\n        <button type=\"button\" class=\"btn btn-danger\" (click)=\"removeFieldOption(i)\">Remove</button>\n      </div>\n    </form>\n  </div>\n  <button type=\"button\" class=\"btn btn-primary\" (click)=\"addFieldOption()\">Add Option</button>\n</div>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}