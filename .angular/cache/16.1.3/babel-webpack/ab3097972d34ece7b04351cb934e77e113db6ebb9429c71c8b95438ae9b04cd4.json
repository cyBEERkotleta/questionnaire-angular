{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../service/form.service\";\nimport * as i2 from \"../../service/user.service\";\nimport * as i3 from \"../../service/topic.service\";\nimport * as i4 from \"../../service/field.service\";\nimport * as i5 from \"@angular/router\";\nconst _c0 = function (a0) {\n  return {\n    \"bg-gray-100\": a0,\n    \"cursor-pointer\": true\n  };\n};\nfunction ManageQuestionnairesComponent_tbody_10_tr_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\", 6)(1, \"td\", 7);\n    i0.ɵɵlistener(\"click\", function ManageQuestionnairesComponent_tbody_10_tr_1_Template_td_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const i_r4 = restoredCtx.index;\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.getRouterLinkForForm(i_r4));\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 7);\n    i0.ɵɵlistener(\"click\", function ManageQuestionnairesComponent_tbody_10_tr_1_Template_td_click_3_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const i_r4 = restoredCtx.index;\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r7.getRouterLinkForForm(i_r4));\n    });\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 7);\n    i0.ɵɵlistener(\"click\", function ManageQuestionnairesComponent_tbody_10_tr_1_Template_td_click_5_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const i_r4 = restoredCtx.index;\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.getRouterLinkForForm(i_r4));\n    });\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\")(8, \"div\", 8);\n    i0.ɵɵelement(9, \"app-button-edit\", 9)(10, \"app-button-delete\", 10);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const form_r2 = ctx.$implicit;\n    const even_r3 = ctx.even;\n    const i_r4 = ctx.index;\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(6, _c0, even_r3));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(form_r2.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(form_r2.topic.shownName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.fieldCounts[i_r4]);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"editable\", form_r2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"deletable\", form_r2);\n  }\n}\nfunction ManageQuestionnairesComponent_tbody_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tbody\");\n    i0.ɵɵtemplate(1, ManageQuestionnairesComponent_tbody_10_tr_1_Template, 11, 8, \"tr\", 5);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.forms);\n  }\n}\nexport class ManageQuestionnairesComponent {\n  constructor(formService, userService, topicService, fieldService, router) {\n    this.formService = formService;\n    this.userService = userService;\n    this.topicService = topicService;\n    this.fieldService = fieldService;\n    this.router = router;\n  }\n  ngOnInit() {\n    this.subscriptionUser = this.userService.updateCurrentUser().subscribe(result => {\n      this.user = result;\n      this.subscriptionForms = this.formService.getFormsByUserId(this.user.id).subscribe(forms => {\n        this.forms = forms;\n      });\n      this.subscriptionFieldCounts = this.fieldService.getFieldCountsOfUserForms(this.user.id).subscribe(fieldCounts => {\n        this.fieldCounts = fieldCounts;\n      });\n    });\n  }\n  ngOnDestroy() {\n    if (this.subscriptionUser) this.subscriptionUser.unsubscribe();\n    if (this.subscriptionForms) this.subscriptionForms.unsubscribe();\n    if (this.subscriptionFieldCounts) this.subscriptionFieldCounts.unsubscribe();\n  }\n  getRouterLinkForForm(index) {\n    this.router.navigate(['/my-form-fields', this.forms[index].id]);\n  }\n}\nManageQuestionnairesComponent.ɵfac = function ManageQuestionnairesComponent_Factory(t) {\n  return new (t || ManageQuestionnairesComponent)(i0.ɵɵdirectiveInject(i1.FormService), i0.ɵɵdirectiveInject(i2.UserService), i0.ɵɵdirectiveInject(i3.TopicService), i0.ɵɵdirectiveInject(i4.FieldService), i0.ɵɵdirectiveInject(i5.Router));\n};\nManageQuestionnairesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ManageQuestionnairesComponent,\n  selectors: [[\"app-manage-questionnaires\"]],\n  decls: 11,\n  vars: 1,\n  consts: [[1, \"table-white-gray\"], [1, \"w-7/12\"], [1, \"w-3/12\"], [1, \"w-auto\"], [4, \"ngIf\"], [3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [3, \"ngClass\"], [3, \"click\"], [1, \"action-buttons\"], [3, \"editable\"], [3, \"deletable\"]],\n  template: function ManageQuestionnairesComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"table\", 0)(1, \"thead\")(2, \"tr\")(3, \"th\", 1);\n      i0.ɵɵtext(4, \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"th\", 2);\n      i0.ɵɵtext(6, \"\\u0422\\u0435\\u043C\\u0430\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"th\", 3);\n      i0.ɵɵtext(8, \"\\u041F\\u043E\\u043B\\u044F\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(9, \"th\", 3);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(10, ManageQuestionnairesComponent_tbody_10_Template, 2, 1, \"tbody\", 4);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"ngIf\", ctx.forms && ctx.fieldCounts);\n    }\n  },\n  styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵlistener","ManageQuestionnairesComponent_tbody_10_tr_1_Template_td_click_1_listener","restoredCtx","ɵɵrestoreView","_r6","i_r4","index","ctx_r5","ɵɵnextContext","ɵɵresetView","getRouterLinkForForm","ɵɵtext","ɵɵelementEnd","ManageQuestionnairesComponent_tbody_10_tr_1_Template_td_click_3_listener","ctx_r7","ManageQuestionnairesComponent_tbody_10_tr_1_Template_td_click_5_listener","ctx_r8","ɵɵelement","ɵɵproperty","ɵɵpureFunction1","_c0","even_r3","ɵɵadvance","ɵɵtextInterpolate","form_r2","name","topic","shownName","ctx_r1","fieldCounts","ɵɵtemplate","ManageQuestionnairesComponent_tbody_10_tr_1_Template","ctx_r0","forms","ManageQuestionnairesComponent","constructor","formService","userService","topicService","fieldService","router","ngOnInit","subscriptionUser","updateCurrentUser","subscribe","result","user","subscriptionForms","getFormsByUserId","id","subscriptionFieldCounts","getFieldCountsOfUserForms","ngOnDestroy","unsubscribe","navigate","ɵɵdirectiveInject","i1","FormService","i2","UserService","i3","TopicService","i4","FieldService","i5","Router","selectors","decls","vars","consts","template","ManageQuestionnairesComponent_Template","rf","ctx","ManageQuestionnairesComponent_tbody_10_Template"],"sources":["C:\\Важное\\6 семестр =)\\Практыка\\Проект\\questionnaire\\angular-questionnaire\\src\\app\\components\\manage-questionnaires\\manage-questionnaires.component.ts","C:\\Важное\\6 семестр =)\\Практыка\\Проект\\questionnaire\\angular-questionnaire\\src\\app\\components\\manage-questionnaires\\manage-questionnaires.component.html"],"sourcesContent":["import {Component, OnDestroy, OnInit} from '@angular/core';\nimport {FormService} from \"../../service/form.service\";\nimport {UserService} from \"../../service/user.service\";\nimport {Subscription} from \"rxjs\";\nimport {Form} from \"../../entity/Form\";\nimport {User} from \"../../entity/User\";\nimport {TopicService} from \"../../service/topic.service\";\nimport {FieldService} from \"../../service/field.service\";\nimport {Router} from \"@angular/router\";\n\n@Component({\n  selector: 'app-manage-questionnaires',\n  templateUrl: './manage-questionnaires.component.html',\n  styleUrls: ['./manage-questionnaires.component.css']\n})\nexport class ManageQuestionnairesComponent implements OnInit, OnDestroy {\n  private formService: FormService;\n  private userService: UserService;\n  private topicService: TopicService;\n  private fieldService: FieldService;\n\n  private router: Router;\n\n  user: User;\n  forms: Form[];\n  fieldCounts: number[];\n\n  private subscriptionUser: Subscription;\n  private subscriptionForms: Subscription;\n  private subscriptionFieldCounts: Subscription;\n\n  constructor(formService: FormService,\n              userService: UserService,\n              topicService: TopicService,\n              fieldService: FieldService,\n\n              router: Router) {\n    this.formService = formService;\n    this.userService = userService;\n    this.topicService = topicService;\n    this.fieldService = fieldService;\n\n    this.router = router;\n  }\n\n  ngOnInit() {\n    this.subscriptionUser = this.userService.updateCurrentUser()\n      .subscribe(result => {\n        this.user = result;\n\n        this.subscriptionForms = this.formService.getFormsByUserId(this.user.id)\n          .subscribe(forms => {\n            this.forms = forms;\n          });\n\n        this.subscriptionFieldCounts = this.fieldService.getFieldCountsOfUserForms(this.user.id)\n          .subscribe(fieldCounts => {\n            this.fieldCounts = fieldCounts;\n          });\n      });\n  }\n\n  ngOnDestroy() {\n    if (this.subscriptionUser)\n      this.subscriptionUser.unsubscribe();\n    if (this.subscriptionForms)\n      this.subscriptionForms.unsubscribe();\n    if (this.subscriptionFieldCounts)\n      this.subscriptionFieldCounts.unsubscribe();\n  }\n\n  getRouterLinkForForm(index: number) {\n    this.router.navigate(['/my-form-fields', this.forms[index].id]);\n  }\n}\n","<table class=\"table-white-gray\"\n>\n  <thead>\n  <tr>\n    <th class=\"w-7/12\">Название</th>\n    <th class=\"w-3/12\">Тема</th>\n    <th class=\"w-auto\">Поля</th>\n    <th class=\"w-auto\"></th>\n  </tr>\n  </thead>\n  <tbody *ngIf=\"forms && fieldCounts\">\n  <tr *ngFor=\"let form of forms; let even = even; let i = index\" [ngClass]=\"{'bg-gray-100': even, 'cursor-pointer': true}\">\n    <td (click)=\"getRouterLinkForForm(i)\">{{form.name}}</td>\n    <td (click)=\"getRouterLinkForForm(i)\">{{form.topic.shownName}}</td>\n    <td (click)=\"getRouterLinkForForm(i)\">{{fieldCounts[i]}}</td>\n    <td>\n      <div class=\"action-buttons\">\n        <app-button-edit\n          [editable]=\"form\"\n        ></app-button-edit>\n        <app-button-delete\n          [deletable]=\"form\"\n        ></app-button-delete>\n      </div>\n    </td>\n  </tr>\n  </tbody>\n</table>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}